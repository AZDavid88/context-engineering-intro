# Systematic Interface Documentation

**Generated by**: CODEFARM Anti-Hallucination Roadmap Generator  
**Date**: 2025-08-02  
**Status**: Validated Interface Specifications  
**Purpose**: Systematic prevention of interface mismatches through research-validated patterns

---

## ğŸ¯ INTERFACE VALIDATION FRAMEWORK

This documentation provides **systematic interface specifications** derived from **actual implementation analysis** and **research validation**. Every interface definition prevents hallucination by ensuring exact compliance with validated patterns.

---

## ğŸ” VALIDATED INTERFACE PATTERNS

### **1. GENETIC SEED REGISTRY INTERFACE**

**Validation Source**: Code Analysis of `src/strategy/genetic_seeds/seed_registry.py`

#### **âœ… VALIDATED METHODS (EXACT IMPLEMENTATION)**

```python
class SeedRegistry:
    """
    Validated interface based on actual implementation analysis.
    SOURCE: src/strategy/genetic_seeds/seed_registry.py
    """
    
    def get_seeds_by_type(self, seed_type: SeedType) -> List[BaseSeed]:
        """
        Get seeds filtered by specific type.
        
        VALIDATION STATUS: âœ… METHOD EXISTS IN IMPLEMENTATION
        PARAMETERS VALIDATED: âœ… seed_type matches SeedType enum
        RETURN TYPE VALIDATED: âœ… List[BaseSeed] confirmed
        
        Usage:
        momentum_seeds = registry.get_seeds_by_type(SeedType.MOMENTUM)
        """
        pass
    
    def get_all_seeds(self) -> Dict[str, BaseSeed]:
        """
        Get all available genetic seeds.
        
        VALIDATION STATUS: âœ… METHOD EXISTS IN IMPLEMENTATION
        RETURN TYPE VALIDATED: âœ… Dict[str, BaseSeed] confirmed
        
        Usage:
        all_seeds = registry.get_all_seeds()
        """
        pass
    
    def register_seed(self, seed: BaseSeed) -> None:
        """
        Register new genetic seed.
        
        VALIDATION STATUS: âœ… METHOD EXISTS IN IMPLEMENTATION
        PARAMETERS VALIDATED: âœ… seed parameter type confirmed
        
        Usage:
        registry.register_seed(new_momentum_seed)
        """
        pass
```

#### **âŒ FORBIDDEN METHODS (HALLUCINATION SOURCES)**

```python
# âŒ CRITICAL ERROR: These methods DO NOT exist in actual implementation
def list_all_seeds(self) -> List[BaseSeed]:
    """
    HALLUCINATION WARNING: This method does not exist in actual registry.
    CORRECT METHOD: Use get_all_seeds() instead
    ERROR SOURCE: Interface mismatch hallucination
    """
    pass

def find_seeds_by_name(self, name: str) -> Optional[BaseSeed]:
    """
    HALLUCINATION WARNING: This method does not exist in actual registry.
    ERROR SOURCE: Assumed interface without validation
    """
    pass

def get_optimal_seeds(self, criteria: Dict) -> List[BaseSeed]:
    """
    HALLUCINATION WARNING: This method does not exist in actual registry.
    ERROR SOURCE: Feature assumption without implementation
    """
    pass
```

### **2. GENETIC SEED TYPE ENUMERATION**

**Validation Source**: Code Analysis of `src/strategy/genetic_seeds/base_seed.py:27-37`

#### **âœ… VALIDATED ENUM VALUES (EXACT IMPLEMENTATION)**

```python
class SeedType(str, Enum):
    """
    Validated seed types from actual implementation.
    SOURCE: src/strategy/genetic_seeds/base_seed.py:27-37
    """
    # VALIDATED: All values confirmed in actual implementation
    MOMENTUM = "momentum"                    # âœ… LINE 29
    MEAN_REVERSION = "mean_reversion"        # âœ… LINE 30
    BREAKOUT = "breakout"                    # âœ… LINE 31
    RISK_MANAGEMENT = "risk_management"      # âœ… LINE 32
    CARRY = "carry"                          # âœ… LINE 33
    ML_CLASSIFIER = "ml_classifier"          # âœ… LINE 34
    VOLATILITY = "volatility"                # âœ… LINE 35
    VOLUME = "volume"                        # âœ… LINE 36
    TREND_FOLLOWING = "trend_following"      # âœ… LINE 37
```

#### **âŒ FORBIDDEN ENUM VALUES (HALLUCINATION SOURCES)**

```python
# âŒ CRITICAL ERROR: These values DO NOT exist in actual enum
ARBITRAGE = "arbitrage"                      # âŒ NOT IN IMPLEMENTATION
HIGH_FREQUENCY = "high_frequency"            # âŒ NOT IN IMPLEMENTATION
MARKET_MAKING = "market_making"              # âŒ NOT IN IMPLEMENTATION
STATISTICAL_ARBITRAGE = "stat_arb"           # âŒ NOT IN IMPLEMENTATION
PAIRS_TRADING = "pairs_trading"              # âŒ NOT IN IMPLEMENTATION
```

### **3. BASE SEED INTERFACE**

**Validation Source**: Code Analysis of `src/strategy/genetic_seeds/base_seed.py`

#### **âœ… VALIDATED INTERFACE METHODS**

```python
class BaseSeed(ABC):
    """
    Validated base seed interface from actual implementation.
    SOURCE: src/strategy/genetic_seeds/base_seed.py
    """
    
    @property
    @abstractmethod
    def seed_name(self) -> str:
        """
        VALIDATION STATUS: âœ… REQUIRED PROPERTY IN IMPLEMENTATION
        RETURN TYPE: str (validated)
        """
        pass
    
    @property
    @abstractmethod
    def seed_type(self) -> SeedType:
        """
        VALIDATION STATUS: âœ… REQUIRED PROPERTY IN IMPLEMENTATION
        RETURN TYPE: SeedType (validated)
        """
        pass
    
    @property
    @abstractmethod
    def required_parameters(self) -> List[str]:
        """
        VALIDATION STATUS: âœ… REQUIRED PROPERTY IN IMPLEMENTATION
        RETURN TYPE: List[str] (validated)
        """
        pass
    
    @abstractmethod
    def generate_signals(self, data: pd.DataFrame, **params) -> pd.Series:
        """
        VALIDATION STATUS: âœ… REQUIRED METHOD IN IMPLEMENTATION
        PARAMETERS: data (pd.DataFrame), **params (validated)
        RETURN TYPE: pd.Series (validated)
        """
        pass
    
    @abstractmethod
    def validate_parameters(self, params: Dict[str, Any]) -> bool:
        """
        VALIDATION STATUS: âœ… REQUIRED METHOD IN IMPLEMENTATION
        PARAMETERS: params (Dict[str, Any]) (validated)
        RETURN TYPE: bool (validated)
        """
        pass
```

---

## ğŸ”’ HYPERLIQUID CLIENT INTERFACE

**Validation Source**: Code Analysis of `src/data/hyperliquid_client.py` + Research Documentation

#### **âœ… VALIDATED SUBSCRIPTION TYPES**

```python
class SubscriptionType(str, Enum):
    """
    Validated WebSocket subscription types.
    SOURCE: src/data/hyperliquid_client.py:43-60 + research validation
    """
    # Market Data Subscriptions (VALIDATED)
    ALL_MIDS = "allMids"              # âœ… Current mid prices for all assets
    L2_BOOK = "l2Book"                # âœ… Level 2 order book (top 10 bids/asks)
    TRADES = "trades"                 # âœ… Recent trade history
    BBO = "bbo"                       # âœ… Best bid/offer updates
    CANDLES = "candles"               # âœ… OHLCV candle data
    
    # Account Data Subscriptions (VALIDATED)
    USER_EVENTS = "userEvents"        # âœ… User-specific events
    USER_FILLS = "userFills"          # âœ… User trade fills
    USER_FUNDINGS = "userFundings"    # âœ… User funding payments
```

#### **âœ… VALIDATED RATE LIMITS**

```python
class HyperliquidRateLimits:
    """
    Validated rate limits from research documentation.
    SOURCE: research/hyperliquid_documentation/6_rate_limits_and_constraints.md
    """
    # REST API Limits (VALIDATED)
    REST_REQUESTS_PER_MINUTE = 1200   # âœ… Per IP address
    REST_BURST_LIMIT = 100            # âœ… Short-term burst allowance
    
    # WebSocket Limits (VALIDATED)
    WEBSOCKET_CONNECTIONS_PER_IP = 100    # âœ… Maximum connections per IP
    SUBSCRIPTIONS_PER_CONNECTION = 1000   # âœ… Maximum subscriptions per connection
    
    # Address-based Limits (VALIDATED)
    BASE_ADDRESS_LIMIT = 10000        # âœ… Base limit per address
    ADDITIONAL_PER_DOLLAR_TRADED = 1  # âœ… Additional limit per $1 traded
```

#### **âŒ FORBIDDEN SUBSCRIPTION TYPES (HALLUCINATION SOURCES)**

```python
# âŒ CRITICAL ERROR: These subscription types DO NOT exist
CUSTOM_SIGNALS = "customSignals"              # âŒ NOT IN DOCUMENTATION
ADVANCED_ANALYTICS = "advancedAnalytics"      # âŒ NOT IN DOCUMENTATION
MARKET_PREDICTIONS = "marketPredictions"      # âŒ NOT IN DOCUMENTATION
SENTIMENT_DATA = "sentimentData"              # âŒ NOT IN DOCUMENTATION
```

---

## ğŸ“Š MONITORING INTERFACE VALIDATION

**Validation Source**: Code Analysis of `src/execution/monitoring.py` + Research Documentation

#### **âœ… VALIDATED MONITORING COMPONENTS**

```python
# FROM: src/execution/monitoring.py:7-16
from .monitoring_core import (
    MonitoringEngine, MetricCollector, SystemHealthTracker,
    MonitoringSnapshot, SystemHealthMetrics, GeneticEvolutionMetrics, 
    TradingPerformanceMetrics, MonitoringStatus, AlertLevel, AlertCategory
)
from .monitoring_dashboard import DashboardInterface, DataVisualization
from .monitoring_alerts import (
    AlertManager, NotificationDispatcher, EscalationManager, 
    AlertChecker, MonitoringAlert, NotificationChannel
)
```

#### **âœ… VALIDATED PROMETHEUS METRICS**

```python
class PrometheusMetrics:
    """
    Validated Prometheus metric types.
    SOURCE: research/prometheus_python_official/page_2_python_client_implementation.md
    """
    # Standard Metric Types (VALIDATED)
    COUNTER = "Counter"               # âœ… Monotonically increasing values
    HISTOGRAM = "Histogram"           # âœ… Distribution of observations
    GAUGE = "Gauge"                   # âœ… Values that can go up and down
    SUMMARY = "Summary"               # âœ… Similar to Histogram with quantiles
```

#### **âŒ FORBIDDEN MONITORING PATTERNS (HALLUCINATION SOURCES)**

```python
# âŒ CRITICAL ERROR: These metric types DO NOT exist in Prometheus
AdvancedCounter = "AdvancedCounter"           # âŒ NOT A PROMETHEUS TYPE
SuperGauge = "SuperGauge"                     # âŒ NOT A PROMETHEUS TYPE
CustomHistogram = "CustomHistogram"          # âŒ NOT A PROMETHEUS TYPE
```

---

## ğŸ” INTERFACE MISMATCH PREVENTION

### **COMMON HALLUCINATION PATTERNS**

#### **1. Registry Interface Mismatches**

```python
# âŒ COMMON ERROR: Using non-existent method
seeds = registry.list_all_seeds()  # âŒ METHOD DOESN'T EXIST

# âœ… CORRECT: Using validated method
seeds = registry.get_all_seeds()   # âœ… METHOD EXISTS
```

#### **2. Subscription Type Mismatches**

```python
# âŒ COMMON ERROR: Using non-existent subscription
client.subscribe("advancedSignals")  # âŒ TYPE DOESN'T EXIST

# âœ… CORRECT: Using validated subscription
client.subscribe("allMids")          # âœ… TYPE EXISTS
```

#### **3. Parameter Name Mismatches**

```python
# âŒ COMMON ERROR: Using incorrect parameter names
df['ma'] = df['close'].rolling(window_size=20).mean()  # âŒ WRONG PARAMETER

# âœ… CORRECT: Using validated parameter names
df['ma'] = df['close'].rolling(window=20).mean()       # âœ… CORRECT PARAMETER
```

### **INTERFACE VALIDATION CHECKLIST**

#### **Before Using Any Interface:**

```markdown
**MANDATORY VALIDATION STEPS:**
- [ ] Method exists in actual implementation (not assumed)
- [ ] Parameter names match exact implementation
- [ ] Return types match documented interface
- [ ] Enum values exist in actual enumeration
- [ ] Rate limits match documented constraints
- [ ] Error handling patterns follow implementation

**VALIDATION SOURCES:**
- [ ] Code analysis of actual implementation files
- [ ] Research documentation cross-reference
- [ ] Interface specification verification
- [ ] Parameter signature confirmation
```

### **AUTOMATED INTERFACE VALIDATION**

```python
def validate_interface_usage(code_content):
    """
    Automated validation of interface usage against known patterns.
    """
    violations = []
    
    # Check for known hallucinated methods
    hallucinated_methods = [
        "list_all_seeds",
        "find_seeds_by_name", 
        "get_optimal_seeds",
        "advanced_increment",
        "custom_observe"
    ]
    
    for method in hallucinated_methods:
        if method in code_content:
            violations.append(f"Hallucinated method detected: {method}")
    
    # Check for invalid subscription types
    invalid_subscriptions = [
        "customSignals",
        "advancedAnalytics", 
        "marketPredictions"
    ]
    
    for subscription in invalid_subscriptions:
        if subscription in code_content:
            violations.append(f"Invalid subscription type: {subscription}")
    
    return violations
```

---

## ğŸ“‹ INTERFACE EVOLUTION PROTOCOL

### **SAFE INTERFACE CHANGES**

#### **Adding New Methods (Research-Backed)**

```python
# âœ… SAFE: Adding method with research validation
def get_seeds_by_performance(self, min_score: float) -> List[BaseSeed]:
    """
    NEW METHOD: Must have research backing before implementation.
    VALIDATION REQUIRED: Research documentation supporting new interface.
    """
    pass
```

#### **Deprecating Methods (Backward Compatibility)**

```python
# âœ… SAFE: Gradual deprecation with warnings
@deprecated("Use get_all_seeds() instead")
def list_seeds(self) -> List[BaseSeed]:
    """
    DEPRECATED: Maintained for backward compatibility.
    MIGRATION PATH: Clear upgrade path to new interface.
    """
    return list(self.get_all_seeds().values())
```

### **FORBIDDEN INTERFACE CHANGES**

```python
# âŒ FORBIDDEN: Breaking changes without research validation
def get_seeds_by_type(self, seed_type: str) -> Any:  # âŒ Changed type signature
    pass

# âŒ FORBIDDEN: Removing validated methods
# def get_all_seeds(self):  # âŒ Cannot remove validated interface
#     pass
```

---

## ğŸ¯ SUCCESS CRITERIA

### **Interface Validation Metrics**

- **Method Existence**: 100% validation against actual implementation
- **Parameter Accuracy**: Exact parameter name and type matching
- **Return Type Compliance**: Verified return type specifications
- **Enum Validation**: All enum values confirmed in implementation
- **Rate Limit Accuracy**: Exact compliance with documented limits

### **Continuous Interface Monitoring**

- **Daily**: Automated interface usage validation
- **Weekly**: New interface addition verification
- **Monthly**: Interface evolution tracking
- **Quarterly**: Complete interface audit against implementation

---

**ğŸ¯ INTERFACE VALIDATION SUCCESS**: Systematic prevention of interface mismatches through validated specifications, ensuring 100% compliance with actual implementations and zero tolerance for interface hallucinations.